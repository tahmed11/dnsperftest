#!/usr/bin/env bash

command -v bc > /dev/null || { echo "bc was not found. Please install bc."; exit 1; }
{ command -v drill > /dev/null && dig=drill; } || { command -v dig > /dev/null && dig=dig; } || { echo "dig was not found. Please install dnsutils."; exit 1; }



NAMESERVERS=`cat /etc/resolv.conf | grep ^nameserver | cut -d " " -f 2 | sed 's/\(.*\)/&#&/'`

PROVIDERS="
103.20.188.35#1
103.20.188.83#2
103.22.248.62#3
103.3.46.105#4
106.186.17.181#5
106.51.255.133#6
109.69.8.34#7
109.69.8.51#8
110.170.117.15#9
110.76.151.17#10
114.114.114.114#11
114.114.114.119#12
114.114.115.115#13
114.114.115.119#14
115.68.100.102#15
115.68.100.103#16
115.68.62.210#17
115.68.62.222#18
115.85.69.162#19
117.102.224.154#20
117.102.224.230#21
119.160.208.251#22
119.160.208.252#23
119.18.159.222#24
119.252.167.229#25
121.152.231.196#26
121.194.2.2#27
12.127.16.67#28
12.127.17.72#29
121.52.206.130#30
121.52.87.128#31
122.0.0.12#32
122.155.12.41#33
122.155.167.38#34
122.155.167.70#35
122.155.3.119#36
122.210.229.161#37
122.255.96.132#38
124.107.135.126#39
1.2.4.8#40
128.199.248.105#41
129.250.35.250#42
129.250.35.251#43
129.7.1.1#44
129.7.1.6#45
130.180.228.2#46
131.155.140.130#47
131.191.7.12#48
134.48.1.32#49
134.60.1.111#50
137.82.1.1#51
139.0.27.186#52
139.130.4.4#53
139.175.55.244#54
141.1.1.1#55
141.1.27.249#56
141.211.125.15#57
141.211.125.17#58
141.211.144.15#59
141.211.144.17#60
142.103.1.1#61
142.46.1.130#62
142.46.128.130#63
144.76.202.253#64
147.235.250.2#65
147.235.251.3#66
147.29.10.55#67
147.29.10.6#68
148.233.151.6#69
148.233.151.8#70
148.243.65.17#71
149.156.64.210#72
149.211.153.50#73
151.11.85.5#74
152.99.1.10#75
152.99.200.6#76
152.99.78.136#77
153.19.1.254#78
158.43.128.1#79
158.43.128.72#80
158.43.192.1#81
158.43.240.3#82
158.43.240.4#83
159.90.200.7#84
160.7.240.20#85
164.124.101.2#86
164.124.107.9#87
165.166.142.42#88
165.21.100.88#89
165.21.83.88#90
165.87.13.129#91
165.87.201.244#92
168.126.63.1#93
168.188.1.1#94
168.213.3.10#95
168.213.3.11#96
168.215.165.186#97
168.215.210.50#98
168.95.1.1#99
170.51.255.100#100
170.56.58.53#101
173.44.32.2#102
174.34.129.34#103
178.151.86.169#104
178.161.146.10#105
178.254.21.113#106
180.211.129.42#107
185.46.7.100#108
185.46.7.110#109
187.115.52.83#110
187.73.241.67#111
189.90.16.20#112
190.11.32.199#113
192.116.16.26#114
192.172.250.8#115
192.190.173.40#116
192.43.161.22#117
192.76.144.66#118
193.101.111.10#119
193.111.144.145#120
193.111.144.161#121
193.111.200.191#122
193.111.238.5#123
193.138.78.117#124
193.142.218.3#125
193.148.29.100#126
193.148.29.103#127
193.151.32.40#128
193.16.255.2#129
193.17.213.10#130
193.189.114.254#131
193.200.68.230#132
193.201.185.3#133
193.205.136.1#134
193.22.119.195#135
193.226.128.129#136
193.226.61.1#137
193.228.86.5#138
193.230.161.3#139
193.230.161.4#140
193.230.183.201#141
193.230.230.1#142
193.231.112.1#143
193.231.249.1#144
193.231.80.7#145
193.232.69.22#146
193.252.247.52#147
193.252.247.53#148
193.254.232.1#149
193.255.146.53#150
193.26.6.130#151
193.27.192.98#152
193.33.114.2#153
193.33.220.3#154
193.33.236.1#155
193.41.10.1#156
193.41.59.151#157
193.43.108.3#158
193.43.108.62#159
193.43.17.4#160
193.58.204.59#161
193.58.251.251#162
193.67.79.39#163
193.78.240.12#164
193.86.86.2#165
193.89.221.124#166
193.89.221.2#167
193.89.248.1#168
193.95.93.243#169
193.95.93.77#170
194.102.106.1#171
194.113.160.68#172
194.1.154.37#173
194.117.245.2#174
194.12.224.34#175
194.126.130.7#176
194.132.119.151#177
194.132.32.32#178
194.141.12.1#179
194.141.45.4#180
194.145.147.194#181
194.145.240.6#182
194.146.136.1#183
194.149.133.11#184
194.149.146.2#185
194.149.156.140#186
194.150.168.168#187
194.153.232.17#188
194.158.206.205#189
194.158.206.206#190
194.164.181.2#191
194.169.239.10#192
194.169.244.33#193
194.169.244.34#194
194.172.160.4#195
194.179.109.10#196
194.179.1.100#197
194.18.231.5#198
194.187.164.20#199
194.190.225.2#200
194.20.0.24#201
194.213.193.5#202
194.226.211.11#203
194.246.126.68#204
194.246.127.11#205
194.250.223.1#206
194.250.223.2#207
194.25.0.52#208
194.25.0.60#209
194.39.185.10#210
194.50.10.2#211
194.52.202.98#212
194.54.181.90#213
194.6.240.1#214
194.72.9.61#215
194.75.147.212#216
194.77.8.1#217
194.88.202.11#218
194.88.203.6#219
194.98.65.165#220
195.112.96.34#221
195.113.144.194#222
195.114.173.153#223
195.12.4.247#224
195.129.12.114#225
195.129.12.122#226
195.129.12.83#227
195.13.38.3#228
195.137.162.149#229
195.140.236.250#230
195.140.236.253#231
195.14.50.21#232
195.146.81.130#233
195.153.19.10#234
195.153.19.5#235
195.158.239.4#236
195.167.98.3#237
195.170.96.2#238
195.170.97.254#239
195.175.121.10#240
195.175.39.39#241
195.175.39.40#242
195.177.223.3#243
195.177.240.3#244
195.178.123.130#245
195.182.110.132#246
195.182.192.10#247
195.182.192.2#248
195.186.1.110#249
195.186.1.111#250
195.186.4.110#251
195.186.4.111#252
195.189.130.1#253
195.189.131.1#254
195.198.214.72#255
195.20.193.11#256
195.2.195.1#257
195.22.192.252#258
195.24.228.3#259
195.243.214.4#260
195.244.25.3#261
195.245.76.6#262
195.27.1.1#263
195.35.110.4#264
195.5.125.3#265
195.60.70.5#266
195.67.15.102#267
195.67.15.73#268
195.67.160.3#269
195.67.27.18#270
195.69.65.98#271
195.70.237.42#272
195.70.248.1#273
195.74.128.6#274
195.7.64.3#275
195.88.84.100#276
195.96.208.1#277
195.99.66.220#278
196.41.225.11#279
198.60.22.2#280
198.82.247.34#281
199.249.18.1#282
199.249.19.2#283
199.44.194.2#284
199.80.64.202#285
200.113.185.227#286
200.118.2.88#287
200.175.3.232#288
200.221.11.100#289
200.221.11.101#290
200.221.137.40#291
200.221.137.41#292
200.221.137.42#293
200.221.137.43#294
200.221.137.44#295
200.221.137.45#296
200.221.137.46#297
200.221.137.47#298
200.35.174.126#299
200.40.230.36#300
200.49.160.31#301
200.49.160.35#302
200.53.250.1#303
200.56.224.11#304
200.57.2.108#305
200.57.7.61#306
200.69.193.2#307
200.85.0.105#308
200.85.35.158#309
200.85.61.90#310
200.88.127.22#311
200.88.127.23#312
200.95.144.3#313
201.131.4.5#314
201.131.4.9#315
202.120.111.3#316
202.130.97.65#317
202.130.97.66#318
202.136.162.11#319
202.138.120.4#320
202.138.120.6#321
202.138.120.87#322
202.148.202.3#323
202.148.202.4#324
202.152.162.66#325
202.180.160.1#326
202.181.224.2#327
202.199.160.206#328
202.248.20.133#329
202.248.37.74#330
202.28.162.1#331
202.30.143.11#332
202.38.128.58#333
202.43.178.244#334
202.43.178.245#335
202.44.204.63#336
202.44.55.193#337
202.46.1.2#338
202.51.96.5#339
202.62.224.2#340
202.83.20.101#341
202.83.30.5#342
202.86.8.100#343
202.91.8.234#344
203.109.129.67#345
203.109.129.68#346
203.113.11.37#347
203.115.130.74#348
203.115.71.66#349
203.115.81.38#350
203.119.36.106#351
203.119.8.106#352
203.130.2.3#353
203.133.1.7#354
203.133.1.8#355
203.146.237.222#356
203.146.237.237#357
203.156.104.21#358
203.176.144.12#359
203.176.144.20#360
203.189.88.10#361
203.189.88.11#362
203.189.88.133#363
203.189.88.148#364
203.189.88.151#365
203.189.88.152#366
203.189.88.154#367
203.189.88.156#368
203.189.88.211#369
203.189.88.212#370
203.189.88.213#371
203.189.88.214#372
203.189.88.54#373
203.189.89.1#374
203.189.89.134#375
203.189.89.15#376
203.189.89.209#377
203.189.89.241#378
203.189.89.36#379
203.189.89.65#380
203.193.139.150#381
203.196.0.6#382
203.198.7.66#383
203.2.193.67#384
203.239.131.1#385
203.248.252.2#386
203.250.129.214#387
203.253.31.1#388
203.41.44.20#389
203.63.8.27#390
203.80.96.10#391
203.89.226.24#392
203.89.226.26#393
203.90.78.65#394
204.116.57.2#395
204.117.214.10#396
204.174.120.45#397
204.95.160.2#398
205.134.162.209#399
205.151.222.250#400
205.152.6.20#401
205.171.2.65#402
205.172.19.193#403
205.172.19.79#404
205.236.148.130#405
205.236.148.131#406
205.242.187.234#407
206.124.0.254#408
206.124.1.254#409
206.124.64.1#410
206.124.64.253#411
206.248.95.194#412
206.253.194.65#413
206.253.33.130#414
206.253.33.131#415
206.51.143.55#416
206.80.254.4#417
206.80.254.68#418
207.17.190.5#419
207.17.190.7#420
207.179.3.25#421
207.241.160.34#422
207.248.224.71#423
207.248.224.72#424
207.248.57.10#425
207.249.163.155#426
207.91.130.4#427
207.91.250.34#428
208.116.30.21#429
208.38.1.15#430
208.48.253.106#431
208.59.89.20#432
208.67.220.220#433
208.67.220.222#434
208.67.222.220#435
208.67.222.222#436
208.72.120.204#437
208.78.24.238#438
208.79.56.204#439
208.90.237.9#440
209.0.205.11#441
209.143.0.10#442
209.143.22.182#443
209.172.128.2#444
209.191.129.65#445
209.195.95.95#446
209.197.128.2#447
209.213.223.18#448
209.216.160.131#449
209.216.160.2#450
209.252.33.101#451
209.51.161.14#452
209.51.161.58#453
209.55.0.110#454
209.55.1.220#455
209.63.0.18#456
209.87.64.70#457
209.87.79.232#458
210.180.98.69#459
210.220.163.82#460
210.2.4.8#461
210.29.96.33#462
210.34.0.18#463
210.34.48.34#464
210.44.112.66#465
210.80.58.3#466
210.80.58.66#467
210.94.0.7#468
211.115.194.2#469
211.115.194.3#470
211.161.46.84#471
211.172.208.2#472
211.175.82.66#473
211.237.65.21#474
211.237.65.31#475
211.41.128.70#476
211.41.128.71#477
211.60.155.5#478
211.63.64.11#479
211.67.112.1#480
211.78.130.10#481
211.78.130.11#482
211.78.130.3#483
212.102.225.2#484
212.110.122.132#485
212.1.118.3#486
212.112.39.22#487
212.112.39.25#488
212.116.76.76#489
212.118.0.2#490
212.118.241.1#491
212.118.241.33#492
212.122.224.10#493
212.14.253.242#494
212.15.86.12#495
212.181.124.8#496
212.19.149.226#497
212.192.128.3#498
212.19.96.2#499
212.203.32.11#500
212.203.33.12#501
212.211.132.4#502
212.214.229.170#503
212.216.172.222#504
212.230.255.1#505
212.230.255.129#506
212.236.250.4#507
212.245.158.66#508
212.26.6.11#509
212.28.34.90#510
212.30.96.211#511
212.31.253.69#512
212.31.32.130#513
212.31.32.131#514
212.34.194.211#515
212.36.24.3#516
212.37.208.3#517
212.40.0.10#518
212.40.5.50#519
212.40.5.51#520
212.49.128.65#521
212.51.16.1#522
212.51.17.1#523
212.54.160.7#524
212.57.190.166#525
212.58.3.2#526
212.58.3.7#527
212.58.3.8#528
212.59.199.2#529
212.59.199.6#530
212.62.98.10#531
212.66.0.1#532
212.66.1.1#533
212.66.129.98#534
212.66.160.2#535
212.67.131.4#536
212.73.209.34#537
212.73.65.40#538
212.82.225.7#539
212.82.226.212#540
212.85.112.32#541
212.85.32.3#542
212.89.130.180#543
212.9.160.1#544
212.94.162.33#545
212.94.32.32#546
212.94.34.34#547
212.96.1.70#548
212.97.32.2#549
212.98.160.50#550
212.98.160.65#551
213.0.76.5#552
213.0.77.5#553
213.0.77.8#554
213.115.244.69#555
213.128.194.2#556
213.131.178.10#557
213.135.67.1#558
213.151.109.1#559
213.157.0.194#560
213.157.196.130#561
213.157.196.131#562
213.157.196.132#563
213.158.72.1#564
213.16.104.61#565
213.164.38.66#566
213.171.220.209#567
213.172.33.34#568
213.178.66.2#569
213.184.242.6#570
213.211.50.1#571
213.211.50.2#572
213.218.117.85#573
213.234.128.211#574
213.235.248.228#575
213.239.204.35#576
213.241.193.250#577
213.244.72.31#578
213.27.209.53#579
213.27.209.8#580
213.55.96.166#581
213.8.145.133#582
213.88.195.146#583
213.88.195.147#584
213.88.195.148#585
216.106.1.2#586
216.106.184.6#587
216.131.94.5#588
216.131.95.20#589
216.136.95.2#590
216.138.119.6#591
216.146.35.230#592
216.147.131.33#593
216.17.128.1#594
216.17.128.2#595
216.175.203.51#596
216.181.31.11#597
216.184.96.4#598
216.184.96.5#599
216.184.96.6#600
216.185.64.6#601
216.186.27.15#602
216.194.28.33#603
216.198.139.68#604
216.21.128.22#605
216.21.129.22#606
216.218.221.6#607
216.218.226.238#608
216.235.1.3#609
216.237.221.42#610
216.244.192.3#611
216.244.192.32#612
216.254.141.13#613
216.254.141.2#614
216.254.95.2#615
216.27.175.2#616
216.47.160.12#617
216.47.160.13#618
216.52.126.1#619
216.52.129.1#620
216.52.161.33#621
216.52.169.1#622
216.52.190.33#623
216.52.254.1#624
216.52.254.33#625
216.52.41.1#626
216.52.41.33#627
216.52.65.1#628
216.52.65.33#629
216.52.94.1#630
216.52.94.33#631
216.52.97.33#632
216.54.201.11#633
216.58.97.20#634
216.58.97.21#635
216.66.22.2#636
216.66.38.58#637
216.66.80.26#638
216.66.80.30#639
216.66.80.98#640
216.81.128.132#641
216.81.96.67#642
216.81.96.68#643
217.107.10.254#644
217.107.11.35#645
217.113.48.1#646
217.115.16.2#647
217.115.16.3#648
217.117.0.38#649
217.117.111.1#650
217.144.144.211#651
217.144.6.6#652
217.148.0.17#653
217.149.155.180#654
217.149.17.1#655
217.15.17.2#656
217.156.106.1#657
217.173.198.3#658
217.17.34.68#659
217.174.252.116#660
217.18.206.12#661
217.18.206.22#662
217.18.80.105#663
217.18.90.105#664
217.196.1.5#665
217.196.1.6#666
217.219.236.8#667
217.22.209.254#668
217.24.112.2#669
217.27.240.20#670
217.28.113.13#671
217.28.98.62#672
217.31.204.130#673
217.32.105.66#674
217.64.163.1#675
217.64.167.1#676
217.65.192.1#677
217.66.226.8#678
217.69.160.18#679
217.69.169.25#680
217.72.1.2#681
217.72.168.34#682
217.73.17.110#683
217.76.240.2#684
217.78.80.70#685
217.78.80.74#686
217.79.225.8#687
217.8.180.98#688
218.102.23.228#689
218.192.240.2#690
218.223.32.1#691
218.232.110.36#692
218.232.110.37#693
219.250.36.130#694
219.252.2.100#695
220.128.173.228#696
220.227.60.12#697
220.233.0.1#698
221.139.13.130#699
24.154.1.4#700
24.154.1.5#701
35.8.2.41#702
35.8.2.42#703
35.8.2.45#704
35.8.98.43#705
37.19.5.135#706
37.235.1.174#707
37.235.1.177#708
42.62.176.30#709
4.79.132.219#710
50.21.174.18#711
58.68.121.230#712
58.96.3.34#713
61.19.252.238#714
61.208.115.242#715
61.56.211.185#716
61.63.0.66#717
61.70.87.96#718
62.105.17.252#719
62.108.161.161#720
62.109.182.2#721
62.116.30.200#722
62.128.1.42#723
62.128.1.53#724
62.129.252.215#725
62.129.252.252#726
62.134.11.4#727
62.140.239.1#728
62.141.38.230#729
62.149.128.2#730
62.165.32.250#731
62.165.33.250#732
62.168.59.67#733
62.177.42.174#734
62.196.2.70#735
62.20.15.234#736
62.20.57.226#737
62.231.76.49#738
62.233.128.17#739
62.24.228.202#740
62.33.203.33#741
62.3.32.16#742
62.3.32.17#743
62.36.225.150#744
62.37.225.56#745
62.37.225.57#746
62.37.228.20#747
62.40.32.34#748
62.76.76.62#749
62.77.85.100#750
62.77.85.98#751
62.77.94.72#752
62.8.96.38#753
62.94.0.41#754
62.94.0.42#755
62.95.15.107#756
62.97.84.4#757
63.105.204.164#758
63.171.232.38#759
63.171.232.39#760
63.218.44.186#761
63.251.129.33#762
63.251.161.1#763
63.251.161.33#764
63.251.62.1#765
63.251.62.33#766
64.105.163.106#767
64.105.172.26#768
64.105.179.138#769
64.105.189.26#770
64.105.199.74#771
64.105.199.76#772
64.105.202.138#773
64.105.97.90#774
64.119.60.5#775
64.119.60.9#776
64.13.115.12#777
64.132.61.131#778
64.132.94.250#779
64.13.48.12#780
64.135.1.20#781
64.135.1.22#782
64.254.99.13#783
64.56.129.2#784
64.61.99.2#785
64.79.224.3#786
64.81.127.2#787
64.81.159.2#788
64.94.1.1#789
64.94.1.33#790
64.94.33.33#791
65.163.107.11#792
65.203.109.2#793
65.39.139.53#794
65.74.130.5#795
65.74.130.6#796
66.118.80.4#797
66.119.93.10#798
66.119.93.4#799
66.163.0.161#800
66.163.0.173#801
66.165.177.69#802
66.165.183.87#803
66.182.208.5#804
66.203.72.10#805
66.207.160.111#806
66.216.18.222#807
66.218.245.13#808
66.218.44.5#809
66.232.139.10#810
66.252.170.3#811
66.28.0.45#812
66.28.0.61#813
66.51.206.100#814
66.80.130.18#815
66.81.0.252#816
66.92.159.2#817
66.92.224.2#818
66.92.64.2#819
66.93.87.2#820
67.100.88.27#821
67.214.64.6#822
68.179.203.94#823
69.146.17.3#824
69.16.169.11#825
69.16.170.11#826
69.24.112.11#827
69.25.1.1#828
69.25.1.33#829
69.26.129.2#830
69.28.104.5#831
69.28.136.102#832
69.28.148.102#833
69.28.97.4#834
69.54.70.15#835
69.67.97.18#836
69.7.192.1#837
69.7.192.2#838
70.36.0.5#839
70.36.0.6#840
72.11.150.10#841
72.11.150.74#842
72.52.104.74#843
74.222.30.2#844
74.82.46.6#845
75.94.255.12#846
76.73.18.50#847
77.240.144.164#848
77.241.112.23#849
77.247.176.114#850
77.41.229.2#851
77.72.192.3#852
77.73.104.3#853
77.87.152.9#854
77.88.8.1#855
77.88.8.2#856
77.88.8.8#857
77.88.8.88#858
78.159.224.224#859
78.159.232.232#860
78.31.96.2#861
79.132.192.2#862
79.141.81.250#863
79.141.82.250#864
79.141.83.250#865
80.149.86.20#866
80.254.79.157#867
80.67.169.12#868
80.72.146.2#869
80.73.1.1#870
80.74.160.11#871
80.79.179.2#872
80.84.72.20#873
80.88.171.16#874
80.92.178.98#875
80.94.48.254#876
81.17.66.14#877
81.17.72.70#878
81.180.201.98#879
81.18.242.100#880
81.189.212.129#881
81.18.97.50#882
81.200.80.11#883
81.222.80.2#884
81.23.144.250#885
81.24.128.146#886
81.25.152.2#887
81.27.133.50#888
81.27.135.50#889
81.28.128.34#890
8.15.12.5#891
81.7.200.80#892
81.92.96.22#893
81.92.97.12#894
81.95.128.218#895
82.115.163.2#896
82.141.136.2#897
82.144.181.1#898
82.145.160.140#899
82.145.163.1#900
82.151.90.1#901
82.198.129.138#902
82.199.32.36#903
82.212.67.100#904
82.212.67.101#905
82.96.65.2#906
82.96.81.10#907
82.96.86.20#908
82.99.211.195#909
83.137.41.8#910
83.137.41.9#911
83.142.192.2#912
83.142.9.30#913
83.143.12.246#914
83.143.8.220#915
83.149.244.194#916
83.151.112.193#917
83.166.8.18#918
83.240.154.200#919
83.242.140.10#920
83.97.97.3#921
84.200.69.80#922
84.200.70.40#923
84.8.2.11#924
85.114.105.3#925
85.115.224.18#926
85.119.136.158#927
85.119.72.2#928
85.124.252.33#929
85.132.32.41#930
85.132.32.42#931
85.158.50.50#932
85.174.190.2#933
8.5.244.5#934
85.88.19.10#935
85.88.19.11#936
87.103.133.167#937
87.104.254.135#938
87.104.254.39#939
87.197.40.58#940
87.204.12.130#941
87.204.28.12#942
87.229.99.1#943
88.147.158.1#944
88.255.242.6#945
88.255.96.196#946
8.8.4.4#947
88.82.84.129#948
8.8.8.8#949
89.107.129.15#950
89.107.16.2#951
89.185.75.244#952
89.186.66.6#953
89.186.66.7#954
89.233.250.137#955
89.249.224.1#956
90.189.109.2#957
91.143.20.6#958
91.144.248.227#959
91.185.2.10#960
91.185.6.10#961
91.188.0.35#962
91.188.0.5#963
91.194.112.10#964
91.197.164.11#965
91.198.154.133#966
91.199.139.1#967
91.203.177.4#968
91.203.188.1#969
91.207.40.2#970
91.210.24.22#971
91.211.16.6#972
91.212.56.5#973
91.214.72.33#974
91.214.72.34#975
91.98.128.112#976
92.43.224.1#977
93.157.14.65#978
93.157.233.3#979
93.188.152.3#980
94.247.200.2#981
94.247.200.3#982
95.158.128.2#983
95.158.129.2#984
95.173.193.3#985
95.85.9.86#986
80.67.188.188#987
108.61.201.119#988
159.69.198.101#989
47.101.136.37#990
118.24.208.197#991
114.115.240.175#992
119.29.107.85#993
"

# Domains to test. Duplicated domains are ok
DOMAINS2TEST="www.google.com amazon.com facebook.com www.youtube.com www.reddit.com  wikipedia.org twitter.com gmail.com www.google.com whatsapp.com"


totaldomains=0
printf "%-18s" ""
for d in $DOMAINS2TEST; do
    totaldomains=$((totaldomains + 1))
    printf "%-8s" "test$totaldomains"
done
printf "%-8s" "Average"
echo ""


for p in $NAMESERVERS $PROVIDERS; do
    pip=${p%%#*}
    pname=${p##*#}
    ftime=0

    printf "%-18s" "$pname"
    for d in $DOMAINS2TEST; do
        ttime=`$dig +tries=1 +time=2 +stats @$pip $d |grep "Query time:" | cut -d : -f 2- | cut -d " " -f 2`
        if [ -z "$ttime" ]; then
	        #let's have time out be 1s = 1000ms
	        ttime=1000
        elif [ "x$ttime" = "x0" ]; then
	        ttime=1
	    fi

        printf "%-8s" "$ttime ms"
        ftime=$((ftime + ttime))
    done
    avg=`bc -lq <<< "scale=2; $ftime/$totaldomains"`

    echo "  $avg"
done


exit 0;
